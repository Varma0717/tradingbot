<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% block title %}
        Crypto Trading Bot Dashboard
      {% endblock %}
    </title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Custom CSS -->
    <link href="/static/css/style.css" rel="stylesheet" />

    {% block head %}

    {% endblock %}
  </head>
  <body>
    <!-- Connection Status -->
    <div id="connectionStatus" class="connection-status connection-disconnected">
      <i class="bi bi-wifi-off"></i> Disconnected
    </div>

    <div class="container-fluid p-0">
      <div class="row g-0">
        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle btn btn-primary d-md-none position-fixed" style="top: 1rem; left: 1rem; z-index: 1001; display: none;" onclick="toggleSidebar()"><i class="bi bi-list"></i></button>

        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
          <div class="brand">
            <i class="bi bi-robot"></i>
            Trading Bot
          </div>
          <nav class="nav flex-column p-3">
            <a class="nav-link {% if request.url.path == '/' %}active{% endif %}" href="/">
              <i class="bi bi-speedometer2"></i>
              Dashboard
            </a>
            <a class="nav-link {% if request.url.path == '/portfolio' %}active{% endif %}" href="/portfolio">
              <i class="bi bi-wallet2"></i>
              Portfolio
            </a>
            <a class="nav-link {% if request.url.path == '/trades' %}active{% endif %}" href="/trades">
              <i class="bi bi-arrow-left-right"></i>
              Trades
            </a>
            <a class="nav-link {% if request.url.path == '/strategies' %}active{% endif %}" href="/strategies">
              <i class="bi bi-graph-up"></i>
              Strategies
            </a>
            <a class="nav-link {% if request.url.path == '/grid-dca' %}active{% endif %}" href="/grid-dca">
              <i class="bi bi-grid-3x3-gap"></i>
              Grid DCA
            </a>
            <a class="nav-link {% if request.url.path == '/settings' %}active{% endif %}" href="/settings">
              <i class="bi bi-gear"></i>
              Settings
            </a>
          </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
          <!-- Top Navigation -->
          <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom mb-4">
            <div class="container-fluid">
              <h5 class="mb-0">
                {% block page_title %}
                  Dashboard
                {% endblock %}
              </h5>
              <div class="d-flex align-items-center">
                <span class="text-muted me-3">{{ current_time }}</span>
                <div class="dropdown">
                  <button class="btn btn-outline-secondary dropdown-toggle btn-sm" type="button" data-bs-toggle="dropdown">
                    <i class="bi bi-person-circle me-1"></i>
                    Account
                  </button>
                  <ul class="dropdown-menu">
                    <li>
                      <a class="dropdown-item" href="/settings"><i class="bi bi-gear me-2"></i>Settings</a>
                    </li>
                    <li>
                      <hr class="dropdown-divider" />
                    </li>
                    <li>
                      <a class="dropdown-item" href="#"><i class="bi bi-box-arrow-right me-2"></i>Logout</a>
                    </li>
                  </ul>
                </div>
                <div class="dropdown ms-2">
                  <button class="btn btn-outline-secondary dropdown-toggle btn-sm" type="button" data-bs-toggle="dropdown"><i class="bi bi-three-dots-vertical"></i></button>
                  <ul class="dropdown-menu">
                    <li>
                      <a class="dropdown-item" href="#" onclick="refreshData()"><i class="bi bi-arrow-clockwise me-2"></i> Refresh</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="/api/docs" target="_blank"><i class="bi bi-code-square me-2"></i> API Docs</a>
                    </li>
                    <li>
                      <hr class="dropdown-divider" />
                    </li>
                    <li>
                      <a class="dropdown-item text-danger" href="#" onclick="confirmAction('stop')"><i class="bi bi-stop-circle me-2"></i> Stop Bot</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </nav>

          <!-- Page Content -->
          <div class="content-wrapper">
            <div class="container-fluid">
              {% block content %}

              {% endblock %}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JavaScript -->
    <script src="/static/js/dashboard.js"></script>

    {% block scripts %}

    {% endblock %}
  </body>
</html>
