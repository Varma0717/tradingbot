{% extends 'layout.html' %}

{% block title %}
  Help & Support - TradeMantra
{% endblock %}

{% block content %}
  <div class="p-6 max-w-6xl mx-auto">
    <!-- Header -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900 mb-2">Help & Support Center</h1>
      <p class="text-gray-600">Find answers to common questions and get support for your trading journey</p>
    </div>

    <!-- Search Bar -->
    <div class="mb-8">
      <div class="relative max-w-md">
        <input type="text" placeholder="Search help articles..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <!-- Help Topics -->
      <div class="lg:col-span-2 space-y-6">
        {% for category in help_topics %}
          <div class="bg-white rounded-lg shadow-sm border border-gray-200">
            <div class="p-6">
              <h3 class="text-lg font-semibold text-gray-900 mb-4">{{ category.category }}</h3>
              <div class="space-y-3">
                {% for topic in category.topics %}
                  <div class="border-l-4 border-blue-500 pl-4 py-2 hover:bg-gray-50 cursor-pointer transition-colors duration-200">
                    <h4 class="font-medium text-gray-900">{{ topic.title }}</h4>
                    <p class="text-sm text-gray-600">{{ topic.description }}</p>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
        {% endfor %}

        <!-- FAQ Section -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
          <div class="p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Frequently Asked Questions</h3>
            <div class="space-y-4">
              <div class="border-b border-gray-200 pb-4">
                <button class="flex justify-between items-center w-full text-left">
                  <span class="font-medium text-gray-900">How do I connect my broker account?</span>
                  <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
                </button>
                <div class="mt-2 text-sm text-gray-600">Go to Settings > API Configuration and select your broker. You'll need to provide your API credentials from your broker's developer portal.</div>
              </div>

              <div class="border-b border-gray-200 pb-4">
                <button class="flex justify-between items-center w-full text-left">
                  <span class="font-medium text-gray-900">What is the minimum amount to start trading?</span>
                  <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
                </button>
                <div class="mt-2 text-sm text-gray-600">There's no minimum amount from our side, but your broker may have minimum balance requirements. We recommend starting with at least â‚¹10,000 for effective diversification.</div>
              </div>

              <div class="border-b border-gray-200 pb-4">
                <button class="flex justify-between items-center w-full text-left">
                  <span class="font-medium text-gray-900">How secure are my trading credentials?</span>
                  <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
                </button>
                <div class="mt-2 text-sm text-gray-600">All API credentials are encrypted using industry-standard AES-256 encryption and stored securely. We never store your broker login passwords.</div>
              </div>

              <div class="pb-4">
                <button class="flex justify-between items-center w-full text-left">
                  <span class="font-medium text-gray-900">Can I modify or stop a strategy after it's running?</span>
                  <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
                </button>
                <div class="mt-2 text-sm text-gray-600">Yes, you can pause, modify, or stop any strategy at any time from your dashboard. Changes take effect immediately for new trades.</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sidebar -->
      <div class="space-y-6">
        <!-- Contact Support -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">Need More Help?</h3>
          <div class="space-y-4">
            <button class="w-full px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 transition-colors duration-200">Contact Support</button>
            <button class="w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-50 transition-colors duration-200">Schedule Call</button>
            <button class="w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-50 transition-colors duration-200">Join Community</button>
          </div>
        </div>

        <!-- Recent Updates -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">Recent Updates</h3>
          <div class="space-y-4">
            {% for update in recent_updates %}
              <div class="border-l-4 border-green-500 pl-4">
                <p class="text-sm font-medium text-gray-900">{{ update.title }}</p>
                <p class="text-xs text-gray-600 mt-1">{{ update.date }}</p>
                <p class="text-sm text-gray-600 mt-1">{{ update.description }}</p>
              </div>
            {% endfor %}
          </div>
        </div>

        <!-- Quick Links -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">Quick Links</h3>
          <div class="space-y-2">
            <a href="{{ url_for('user.dashboard') }}" class="block text-sm text-blue-600 hover:text-blue-800">Dashboard</a>
            <a href="{{ url_for('user.strategies') }}" class="block text-sm text-blue-600 hover:text-blue-800">My Strategies</a>
            <a href="{{ url_for('user.billing') }}" class="block text-sm text-blue-600 hover:text-blue-800">Billing & Subscription</a>
            <a href="{{ url_for('user.settings') }}" class="block text-sm text-blue-600 hover:text-blue-800">Account Settings</a>
          </div>
        </div>

        <!-- Emergency Contact -->
        <div class="bg-red-50 border border-red-200 rounded-lg p-4">
          <div class="flex">
            <svg class="w-5 h-5 text-red-400 mt-0.5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.99-.833-2.76 0L3.054 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
            </svg>
            <div>
              <h4 class="text-sm font-medium text-red-800">Emergency Support</h4>
              <p class="text-sm text-red-700 mt-1">For critical trading issues:</p>
              <p class="text-sm font-medium text-red-800 mt-1">+91-9999-TRADE</p>
              <p class="text-sm text-red-700">(24/7 Available)</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Simple FAQ toggle functionality
    document.querySelectorAll('.border-b button').forEach((button) => {
      button.addEventListener('click', function () {
        const content = this.nextElementSibling
        const icon = this.querySelector('svg')
    
        if (content.style.display === 'none' || content.style.display === '') {
          content.style.display = 'block'
          icon.style.transform = 'rotate(180deg)'
        } else {
          content.style.display = 'none'
          icon.style.transform = 'rotate(0deg)'
        }
      })
    })
    
    // Hide FAQ answers by default
    document.querySelectorAll('.border-b button').forEach((button) => {
      const content = button.nextElementSibling
      content.style.display = 'none'
    })
  </script>
{% endblock %}
